<div>
  <div class="w-full overflow-x-auto mx-auto">
    <div class="mx-2 md:mx-7 my-5 bg-light">
      <div
        class="search-container w-full flex items-center justify-between px-6 py-5"
      >
        <div>
          <h1 class="text-base font-semibold tracking-wide">
            Application List
          </h1>
        </div>
        <div class="flex items-center gap-3">
          <div class="w-32 ml-auto" (click)="openDialog()">
            <button class="kc-button-primary rounded-[.75rem] text-center cursor-pointer">
              Add New
            </button>
          </div>
        </div>
      </div>
      <div class="resp">
        <table
          mat-table
          matSort
          [dataSource]="dataSource"
          class="mat-elevation-z8 bg-transparent overflow-x-scroll md:overflow-x-hidden"
        >
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef width="15%">Name</th>
            <td mat-cell *matCellDef="let element" class="kc-table">
              <!-- [routerLink]="['application/', element._metadata.id]" -->
              <div class="cursor-pointer" (click)="someRoute(element)">
                {{ element._metadata.name }}
              </div>
            </td>
          </ng-container>

          <ng-container matColumnDef="label">
            <th mat-header-cell *matHeaderCellDef width="30%">Labels</th>
            <td mat-cell *matCellDef="let element">
              <!-- {{ element._metadata.labels.CompanyId }} -->
              <div *ngIf="element._metadata.labels != null; else noLabels">
                <div *ngFor="let key of objectKeys(element._metadata.labels)">
                  {{ key + " : " + element._metadata.labels[key] }}
                </div>
              </div>

              <ng-template #noLabels>
                <span>N/A</span>
              </ng-template>
            </td>
          </ng-container>

          <ng-container matColumnDef="webhook">
            <th mat-header-cell *matHeaderCellDef width="15%">Webhook</th>
            <td mat-cell *matCellDef="let element">
              <div class="w-28 flex justify-between">
                <span>{{
                  element._metadata.is_webhook_enabled ? "enabled" : "disabled"
                }}</span>

                <mat-slide-toggle
                  (change)="webUpdate(element)"
                  class="example-margin"
                  [(ngModel)]="element._metadata.is_webhook_enabled"
                  [checked]="element._metadata.is_webhook_enabled"
                >
                </mat-slide-toggle>
              </div>
            </td>
          </ng-container>
          <ng-container matColumnDef="url">
            <th mat-header-cell *matHeaderCellDef width="30%">URL</th>
            <td mat-cell *matCellDef="let element">
              <a [href]="element.url">{{ element.url }}</a>
            </td>
          </ng-container>
          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef width="10%">Action</th>
            <td mat-cell *matCellDef="let element">
              <button mat-button [matMenuTriggerFor]="menu"><mat-icon>expand_more</mat-icon></button>
              <mat-menu #menu="matMenu" classList="customize">
                <button mat-menu-item (click)="openAppEditor()"><span><mat-icon class="cursor-pointer hover:text-green-500">preview</mat-icon></span>Preview</button>
                <button mat-menu-item (click)="deleteApp(element)"><span ><mat-icon class="cursor-pointer hover:text-red-500">delete</mat-icon>Delete</span></button>
              </mat-menu>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr
            mat-row
            *matRowDef="let row; columns: displayedColumns"
            class="hover:bg-light-600 transition duration-100"
          ></tr>
        </table>
      </div>
      <ngx-skeleton-loader
        *ngIf="isLoading"
        class="mt-3"
        count="6"
        [theme]="{
          'border-radius': '5px',
          'background-color': '#1A2C4A'
        }"
        animation="progress-dark"
        appearance="line"
      ></ngx-skeleton-loader>
    </div>
  </div>
</div>



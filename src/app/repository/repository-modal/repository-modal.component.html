<div class=" relative ">
  <div class="absolute -right-2 -top-2" (click)="closeAppModal()">
    <mat-icon class="text-dark-500 hover:text-dark cursor-pointer">close</mat-icon>
  </div>
  <form [formGroup]="repoFormGroup" (ngSubmit)="subsub()" class=" relative p-6">
    <div class="flex flex-col xl:flex-row gap-6 ">
      <mat-form-field
        class="kc-form-field"
        appearance="outline"
      >
        <mat-label>Type</mat-label>
        <mat-select formControlName="type" name="repo">
          <mat-option
            class="kc-select-type"
            *ngFor="let repo of repos"
            [value]="repo.value"
          >
            {{ repo.viewValue }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field class="kc-form-field" appearance="outline">
        <mat-label>Token</mat-label>
        <input
          formControlName="token"
          required
          type="text"
          autocomplete="off"
          matInput
        />
      </mat-form-field>
    </div>
    <div class="">
      <h1 class="text-right">
        <span class="cursor-pointer">
          <div [ngSwitch]="repoFormGroup.value.type">
            <div *ngSwitchCase="'github'">
              <div class="flex justify-end gap-1">
                <span class="example-container" cdkScrollable>
                  <div
                    #tooltip="matTooltip"
                    [matTooltip]="tooltipMsg"
                    [matTooltipPosition]="'left'"
                    matTooltipClass="my-tooltip"
                    matTooltipHideDelay="500"
                    matTooltipShowDelay="100"
                  >
                    <mat-icon
                      class="text-yellow-500"
                      aria-hidden="false"
                      aria-label="Example home icon"
                    >help_outline</mat-icon
                    >
                  </div>
                </span>
                <a href="https://github.com/settings/tokens" target="_blank">
                  <h1>Generate token</h1>
                </a>
              </div>
            </div>
            <div *ngSwitchCase="'gitlab'">
              <div class="flex justify-end gap-1">
                <span class="example-container" cdkScrollable>
                  <div
                    #tooltip="matTooltip"
                    [matTooltip]="tooltipMsg"
                    [matTooltipPosition]="'left'"
                    matTooltipClass="my-tooltip"
                    matTooltipHideDelay="500"
                    matTooltipShowDelay="100"
                  >
                    <mat-icon
                      class="text-yellow-500"
                      aria-hidden="false"
                      aria-label="Example home icon"
                    >help_outline</mat-icon
                    >
                  </div>
                </span>
                <a
                  href="https://gitlab.com/-/profile/personal_access_tokens"
                  target="_blank"
                >
                  <h1>Generate token</h1>
                </a>
              </div>
            </div>
            <div *ngSwitchCase="'bitbucket'">
              <div class="flex justify-end gap-1">
                <span class="example-container" cdkScrollable>
                  <div
                    #tooltip="matTooltip"
                    [matTooltip]="tooltipMsg"
                    [matTooltipPosition]="'left'"
                    matTooltipClass="my-tooltip "
                    matTooltipHideDelay="500"
                    matTooltipShowDelay="100"
                  >
                    <mat-icon
                      class="text-yellow-500"
                      aria-hidden="false"
                      aria-label="Example home icon"
                    >help_outline</mat-icon
                    >
                  </div>
                </span>
                <a
                  href="https://bitbucket.org/account/settings/app-passwords/"
                  target="_blank"
                >
                  <span>Generate token</span>
                </a>
              </div>
            </div>
            <div *ngSwitchDefault>
              <div class="flex justify-end gap-1">
                <span class="example-container" cdkScrollable>
                  <div
                    #tooltip="matTooltip"
                    [matTooltip]="tooltipMsg"
                    [matTooltipPosition]="'left'"
                    matTooltipClass="my-tooltip"
                    matTooltipHideDelay="500"
                    matTooltipShowDelay="100"
                  >
                    <mat-icon
                      class="text-yellow-500"
                      aria-hidden="false"
                      aria-label="Example home icon"
                    >help_outline</mat-icon
                    >
                  </div>
                </span>
                <span>Generate token</span>
              </div>
            </div>
          </div>
        </span>
      </h1>
    </div>
    <div mat-dialog-actions class="flex justify-end">
      <button
        class="kc-button-primary"
        type="submit"
        [disabled]="!repoFormGroup.valid"
      >
        <span class="text-button text-white" *ngIf="!isLoading; else before_submit"> Submit </span>
        <ng-template #before_submit>
          <div class="py-[10px] mx-auto w-[57px]">
            <mat-progress-bar
              class="green-progress kc-progress-bar"
              mode="indeterminate"
            >
            </mat-progress-bar>
          </div>
        </ng-template>
      </button>
    </div>
  </form>

</div>
